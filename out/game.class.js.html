<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: game.class.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: game.class.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import World from "./world.class.js";
import Drawer from "./utils/drawer.class.js";
import Events from "./utils/events.class.js";
import UI from "./ui.class.js";
import Sounds from "./utils/sounds.class.js";

export default class Game {

    static instance;

    constructor(canvas) {
        /**Singleton */
        if (Game.instance) {
            return Game.instance;
        };
        Game.instance = this;

        /**Setup everything */
        this.loadAssets()

        this.canvas = canvas;
        this.drawer = new Drawer();
        this.events = new Events()
        this.world = new World()
        this.ui = new UI()

        this.update();
    }

    /** on win */
    win() {
        /** freeze character */
        this.world.level.character.freeze = true;

        /**play win sound */
        this.sounds.playSound('../assets/sounds/win.mp3', false, 0.4, 2000);

        /**show win container */
        this.ui.showWinContainer();

        /**clear boss interval */
        clearInterval(this.world.level.boss.attackInterval);
    }

    /**on death */
    lose() {
        /**freeze character */
        this.world.level.character.freeze = true;

        /**clear gsap */
        gsap.globalTimeline.clear();

        clearInterval(this.world.level.boss.attackInterval);

        /**show deatth container */
        this.ui.showDeadContainer();

        /**play dead sound and fade out music */
        this.sounds.playSound('../assets/sounds/dead-sound.mp3', false, 0.4);
        this.sounds.fadeOutAllMusic();
    };

    /**start new game, after death or win */
    restart() {
        /**clear keyup and keydown event callbacks */
        this.events.callbacks.base = {};

        /**new world */
        this.world = new World();

        /**reset UI */
        this.ui = new UI();

        /**play music */
        this.sounds.playMainMusic();

        /**unfreeze character */
        this.world.level.character.freeze = false;
    };

    /**update on every frame */
    update() {
        if (this.world) {
            this.world.update();
        };

        window.requestAnimationFrame(() => {
            this.update();
        });
    };

    loadAssets() {
        /**load bubbles */
        this.bubble = new Image();
        this.bubble.src = '../assets/sharkie/attack/bubble-tap/bubble.png';

        this.poisonBubble = new Image();
        this.poisonBubble.src = '../assets/sharkie/attack/bubble-tap/poison-bubble.png';

        /**load barriers */
        this.barrier0 = new Image();
        this.barrier1 = new Image();
        this.barrier2 = new Image();
        this.barrier3 = new Image();
        this.barrier0.src = '../assets/barriers/0.png';
        this.barrier1.src = '../assets/barriers/1.png';
        this.barrier2.src = '../assets/barriers/2.png';
        this.barrier3.src = '../assets/barriers/3.png';
    };
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addCoin">addCoin</a></li><li><a href="global.html#addPoison">addPoison</a></li><li><a href="global.html#closeTutorial">closeTutorial</a></li><li><a href="global.html#defineElements">defineElements</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#fadeInBossHealthbar">fadeInBossHealthbar</a></li><li><a href="global.html#fillHealthbar">fillHealthbar</a></li><li><a href="global.html#isCollidingWith">isCollidingWith</a></li><li><a href="global.html#killAllEnemies">killAllEnemies</a></li><li><a href="global.html#loadAnimation">loadAnimation</a></li><li><a href="global.html#loadImage">loadImage</a></li><li><a href="global.html#lose">lose</a></li><li><a href="global.html#muteMusic">muteMusic</a></li><li><a href="global.html#muteSounds">muteSounds</a></li><li><a href="global.html#nextFrame">nextFrame</a></li><li><a href="global.html#nextFrameReverse">nextFrameReverse</a></li><li><a href="global.html#openControls">openControls</a></li><li><a href="global.html#playAnimation">playAnimation</a></li><li><a href="global.html#playClick">playClick</a></li><li><a href="global.html#playReverseAnimation">playReverseAnimation</a></li><li><a href="global.html#repeatBackground">repeatBackground</a></li><li><a href="global.html#restart">restart</a></li><li><a href="global.html#restartButtonClick">restartButtonClick</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#setupCoins">setupCoins</a></li><li><a href="global.html#setupMusicButton">setupMusicButton</a></li><li><a href="global.html#setupPoison">setupPoison</a></li><li><a href="global.html#setupSoundsButton">setupSoundsButton</a></li><li><a href="global.html#showDeadContainer">showDeadContainer</a></li><li><a href="global.html#showQuest">showQuest</a></li><li><a href="global.html#showWinContainer">showWinContainer</a></li><li><a href="global.html#unlockPoisonBubbles">unlockPoisonBubbles</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#updateBossHealthbar">updateBossHealthbar</a></li><li><a href="global.html#updateCoins">updateCoins</a></li><li><a href="global.html#updateHealthbar">updateHealthbar</a></li><li><a href="global.html#updatePoison">updatePoison</a></li><li><a href="global.html#win">win</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Sun Dec 04 2022 17:08:27 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
